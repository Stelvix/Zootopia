{% extends 'base.html.twig' %}

{% block title %}Liste des animaux{% endblock %}

{% block body %}
<div class="container my-3">
    <h1 class="text-center mb-4 fw-bold text-primary">Liste des animaux</h1>

    {% if animauxes is not empty %}
        <div class="d-flex flex-row align-items-center gap-3 mb-4 flex-wrap justify-content-center">
            {% for animaux in animauxes %}
                <div class="card mb-3 shadow-sm border-0" style="max-width: 540px; width: 100%;">
                    <div class="row g-0">
                        <div class="col-md-4 d-flex align-items-center justify-content-center bg-light rounded-start">
                            <div class="text-center p-3">
                                <i class="bi bi-paw fs-1 text-secondary"></i>
                                <p class="mt-2 fw-semibold mb-0 text-capitalize">{{ animaux.Espece }}</p>
                                <small class="text-muted">{{ animaux.Genre }}</small>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <div class="card-body">
                                <h5 class="card-title fw-bold text-dark">
                                    {{ animaux.Nom ?: 'Sans nom' }}
                                </h5>

                                <p class="card-text mb-1"><strong>Sexe :</strong> {{ animaux.Sexe }}</p>
                                <p class="card-text mb-1"><strong>Enclos :</strong> {{ animaux.enclos ? animaux.enclos.nom : 'Non assigné' }}</p>
                                <p class="card-text mb-1"><strong>Espace d'appartenance :</strong> {{ animaux.enclos.espace ? animaux.enclos.espace.nom }}</p>
                                <p class="card-text mb-1"><strong>Propriétaire :</strong> {{ animaux.leZooEnEsProprietaire ? 'Le zoo' : 'Autre' }}</p>

                                <p class="card-text mb-1">
                                    <strong>Stérilisé :</strong>
                                    <span class="badge {{ animaux.Sterilise ? 'bg-success' : 'bg-danger' }}">
                                        {{ animaux.Sterilise ? 'Oui' : 'Non' }}
                                    </span>
                                </p>

                                <p class="card-text mb-1">
                                    <strong>Quarantaine :</strong>
                                    <span class="badge {{ animaux.EsEnQuarantaine ? 'bg-warning text-dark' : 'bg-secondary' }}">
                                        {{ animaux.EsEnQuarantaine ? 'Oui' : 'Non' }}
                                    </span>
                                </p>

                                <p class="card-text">
                                    <small class="text-body-secondary">
                                        Arrivé le {{ animaux.DateArriveeAuZoo ? animaux.DateArriveeAuZoo|date('d/m/Y') : '—' }}
                                        {% if animaux.DateDeDepartDuZoo %}
                                            — Parti le {{ animaux.DateDeDepartDuZoo|date('d/m/Y') }}
                                        {% endif %}
                                    </small>
                                </p>

                                <div class="mt-3 d-flex gap-2">
                                    <a href="{{ path('app_animaux_show', {'id': animaux.id}) }}" class="btn btn-outline-primary btn-sm">Voir</a>
                                    <a href="{{ path('app_animaux_edit', {'id': animaux.id}) }}" class="btn btn-outline-secondary btn-sm">Modifier</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="alert alert-info text-center mt-4">
            Aucun animal trouvé.
        </div>
    {% endif %}

    <div class="text-center mt-5">
        <a href="{{ path('app_animaux_new') }}" class="btn btn-primary btn-lg shadow-sm">
            Ajouter un animal
        </a>
    </div>
</div>
{% endblock %}
